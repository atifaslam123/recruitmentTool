<!--
  List of users within the company
  someone with admin powers should be able to view this and add and remove users
  
-->

<sd-card class="sdCard">
  <sd-card-body>

    <!---->
    <div class="row">
      <div class="col-md-2">
        <sd-sidebar sidebarFoldedMdDown="true">
          <sd-sidebar-header-item name="Filter by..."></sd-sidebar-header-item>

          <sd-sidebar-item routerLink="/users" name="Role" navIcon="icons8-manager" navBadgeValue="4"
            navBadgeClass="primary">
            <sd-subnav>
              <div class="sd-form-check ml-5">
                <li>
                  <label class="sd-form-check-label">
                    <input type="checkbox" [(ngModel)]="user.filter.superadmin" (ngModelChange)="user.filterChange()">
                    <i class="dark-white"></i> Super Admin
                  </label>
                </li>
                <li>
                  <label class="sd-form-check-label">
                    <input type="checkbox" [(ngModel)]="user.filter.admin" (ngModelChange)="user.filterChange()">
                    <i class="dark-white"></i> Admin
                  </label>
                </li>
                <li>
                  <label class="sd-form-check-label">
                    <input type="checkbox" [(ngModel)]="user.filter.teamleader" (ngModelChange)="user.filterChange()">
                    <i class="dark-white"></i> Team Leader
                  </label>
                </li>
                <li>
                    <label class="sd-form-check-label">
                      <input type="checkbox" [(ngModel)]="user.filter.normaluser" (ngModelChange)="user.filterChange()">
                      <i class="dark-white"></i> Normal User
                    </label>
                  </li>
              </div>

            </sd-subnav>

          </sd-sidebar-item>

          <sd-sidebar-item routerLink="/users" name="Position" navIcon="icons8-settings" navBadgeValue="3"
            navBadgeClass="primary">
            <sd-subnav>
              <div class="sd-form-check ml-5">
                <li>
                  <label class="sd-form-check-label">
                    <input type="checkbox" [(ngModel)]="user.filter.manager" (ngModelChange)="user.filterChange()">
                    <i class="dark-white"></i> Manager
                  </label>
                </li>
                <li>
                  <label class="sd-form-check-label">
                    <input type="checkbox" [(ngModel)]="user.filter.softwareengineer" (ngModelChange)="user.filterChange()">
                    <i class="dark-white"></i> Software Engineer 
                  </label>
                </li>
                <li>
                  <label class="sd-form-check-label">
                    <input type="checkbox" [(ngModel)]="user.filter.trainee" (ngModelChange)="user.filterChange()">
                    <i class="dark-white"></i> Trainee
                  </label>
                </li>
              </div>

            </sd-subnav>

          </sd-sidebar-item>



          <!---->
        </sd-sidebar>
      </div>

      <div class="col-md-10" style="overflow-x: auto; overflow-y:hidden;">
        <div class="h-full">
          <div class="card-body">
            <sd-page-title ng-reflect-title="list of users">
              <span class="page-heading text-primary pt">LIST OF USERS</span>
              <button type="button" (click)="addUsers()" class="btn btn-raised btn-with-icon btn-outline accent"
                style="float: right">
                <i class="icons8-add-user-male"></i>
                <span>Add User</span>
              </button>
            </sd-page-title>


            <div _ngcontent-c15="" class="c-search mb">
              <input class="form-control" type="text" name="search" [(ngModel)]="searchText" autocomplete="off"
                placeholder="Search...">
            </div>

            <div *ngFor="let user of user.filteredUsers | filter:searchText; index as i">

              <div class="list-group-item d-flex flex-column ng-star-inserted "   [ngStyle]="{backgroundColor: hover==true && selectedIndex==i  ? '#f2f2f4' : 'white' }" (mouseover)="hovering(i)" (mouseleave)="notHovering(i)">
                <div class="d-flex flex-nowrap">
                  <div class="">
                    <div class="ml">

                      <div class="block">
                        <span
                          class="_500 text-primary">{{ user.ID + ". " + user.first_name + " " + user.last_name }}</span>
                        <small class="block my_500"><i>{{ user.position }}</i></small>
                      </div>
                      
                      <div style="display: inline-flex">

                        <div class="block">
                          <span class="_500">Department: </span>
                          <span>{{user.department}}</span>
                        
                            <br>

                            <span class="_500">Subdepartment: </span>
                          <span>{{user.subdepartment}}</span>
                        
                            <br>
                          <span class="_500">Role: </span>
                          <span>{{user.role}}</span>
                        </div>

                        <div class="d-flex flex-nowrap" style="position: absolute; right: 10px; bottom: 3px">
<!-- 
                          <div *ngFor="let test of user.tests">

                            <div _ngcontent-c11="" class="">
                              <span _ngcontent-c11="" class="btn circle btn-outline text-primary">
                                10%
                              </span>
                            </div>
                          </div> -->

                          <div class="mx-1">
                            <a class="circle w-35 btn btn-with-icon white" data-toggle="tooltip" data-placement="bottom"
                              title="User's profile" (click)="test(user.ID)">
                              <i class="icons8-contacts"></i>
                            </a>
                          </div>

                          <div class="mx-1 mb-1" style="color:white;">
                            <a class="grey circle w-35 btn btn-with-icon" data-toggle="tooltip" data-placement="bottom"
                              title="Delete profile" (click)="swalDelete(user.ID);">
                              <i class="icons8-trash"></i>
                            </a>
                          </div>

                        </div>
                      </div>

                    </div>
                  </div>
                </div>
              </div>
              <br>

            </div>


            <!---->
          </div>

        </div>
      </div>

      <sd-body-content-footer>
        <div id="sd-body-content-footer" class="d-flex justify-content-center mx px-5 mb ">
          <span class="pt text-muted">Copyright Â© 2019 sdworx</span></div>
      </sd-body-content-footer>

    </div>

  </sd-card-body>
</sd-card>